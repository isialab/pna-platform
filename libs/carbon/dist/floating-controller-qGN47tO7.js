/**
 * Copyright IBM Corp. 2019, 2020
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license
 * 
 * This bundle contains the following third-party dependencies:
 * 
 * Also refer to the following links for the license of other third-party dependencies:
 * 
 * https://www.npmjs.com/package/tslib
 * https://www.npmjs.com/package/lit
 * https://www.npmjs.com/package/@lit/context
 * https://www.npmjs.com/package/lodash-es
 * https://www.npmjs.com/package/@floating-ui/dom
 * https://www.npmjs.com/package/flatpickr
 * https://www.npmjs.com/package/@carbon/icon-helpers
 * https://www.npmjs.com/package/lit-element
 * https://www.npmjs.com/package/lit-html
 * https://www.npmjs.com/package/@lit/reactive-element
 * https://www.npmjs.com/package/@floating-ui/core
 * https://www.npmjs.com/package/@floating-ui/utils
 */

var t,e;!function(t){t.TOP="top",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.TOP_START="top-start",t.TOP_END="top-end",t.BOTTOM="bottom",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_START="bottom-start",t.BOTTOM_END="bottom-end",t.LEFT="left",t.LEFT_BOTTOM="left-bottom",t.LEFT_TOP="left-top",t.LEFT_START="left-start",t.LEFT_END="left-end",t.RIGHT="right",t.RIGHT_BOTTOM="right-bottom",t.RIGHT_TOP="right-top",t.RIGHT_START="right-start",t.RIGHT_END="right-end"}(t||(t={})),function(t){t.LAYER="layer",t.BACKGROUND="background"}(e||(e={}));const n=["top","right","bottom","left"],o=Math.min,i=Math.max,r=Math.round,l=Math.floor,s=t=>({x:t,y:t}),a={left:"right",right:"left",bottom:"top",top:"bottom"},c={start:"end",end:"start"};function f(t,e,n){return i(t,o(e,n))}function u(t,e){return"function"==typeof t?t(e):t}function d(t){return t.split("-")[0]}function h(t){return t.split("-")[1]}function p(t){return"y"===t?"height":"width"}function m(t){return["top","bottom"].includes(d(t))?"y":"x"}function g(t){return"x"===m(t)?"y":"x"}function y(t){return t.replace(/start|end/g,(t=>c[t]))}function w(t){return t.replace(/left|right|bottom|top/g,(t=>a[t]))}function b(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function x(t){const{x:e,y:n,width:o,height:i}=t;return{width:o,height:i,top:n,left:e,right:e+o,bottom:n+i,x:e,y:n}}function v(t,e,n){let{reference:o,floating:i}=t;const r=m(e),l=g(e),s=p(l),a=d(e),c="y"===r,f=o.x+o.width/2-i.width/2,u=o.y+o.height/2-i.height/2,y=o[s]/2-i[s]/2;let w;switch(a){case"top":w={x:f,y:o.y-i.height};break;case"bottom":w={x:f,y:o.y+o.height};break;case"right":w={x:o.x+o.width,y:u};break;case"left":w={x:o.x-i.width,y:u};break;default:w={x:o.x,y:o.y}}switch(h(e)){case"start":w[l]-=y*(n&&c?-1:1);break;case"end":w[l]+=y*(n&&c?-1:1)}return w}async function T(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:r,rects:l,elements:s,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=u(e,t),m=b(p),g=s[h?"floating"===d?"reference":"floating":d],y=x(await r.getClippingRect({element:null==(n=await(null==r.isElement?void 0:r.isElement(g)))||n?g:g.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:a})),w="floating"===d?{x:o,y:i,width:l.floating.width,height:l.floating.height}:l.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(s.floating)),T=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},R=x(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:w,offsetParent:v,strategy:a}):w);return{top:(y.top-R.top+m.top)/T.y,bottom:(R.bottom-y.bottom+m.bottom)/T.y,left:(y.left-R.left+m.left)/T.x,right:(R.right-y.right+m.right)/T.x}}function R(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function O(t){return n.some((e=>t[e]>=0))}function L(){return"undefined"!=typeof window}function E(t){return D(t)?(t.nodeName||"").toLowerCase():"#document"}function A(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function P(t){var e;return null==(e=(D(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function D(t){return!!L()&&(t instanceof Node||t instanceof A(t).Node)}function S(t){return!!L()&&(t instanceof Element||t instanceof A(t).Element)}function k(t){return!!L()&&(t instanceof HTMLElement||t instanceof A(t).HTMLElement)}function F(t){return!(!L()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof A(t).ShadowRoot)}function H(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=N(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function C(t){return["table","td","th"].includes(E(t))}function B(t){return[":popover-open",":modal"].some((e=>{try{return t.matches(e)}catch(t){return!1}}))}function _(t){const e=M(),n=S(t)?N(t):t;return["transform","translate","scale","rotate","perspective"].some((t=>!!n[t]&&"none"!==n[t]))||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function M(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function W(t){return["html","body","#document"].includes(E(t))}function N(t){return A(t).getComputedStyle(t)}function I(t){return S(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function V(t){if("html"===E(t))return t;const e=t.assignedSlot||t.parentNode||F(t)&&t.host||P(t);return F(e)?e.host:e}function G(t){const e=V(t);return W(e)?t.ownerDocument?t.ownerDocument.body:t.body:k(e)&&H(e)?e:G(e)}function $(t,e,n){var o;void 0===e&&(e=[]),void 0===n&&(n=!0);const i=G(t),r=i===(null==(o=t.ownerDocument)?void 0:o.body),l=A(i);if(r){const t=z(l);return e.concat(l,l.visualViewport||[],H(i)?i:[],t&&n?$(t):[])}return e.concat(i,$(i,[],n))}function z(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function U(t){const e=N(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=k(t),l=i?t.offsetWidth:n,s=i?t.offsetHeight:o,a=r(n)!==l||r(o)!==s;return a&&(n=l,o=s),{width:n,height:o,$:a}}function Y(t){return S(t)?t:t.contextElement}function j(t){const e=Y(t);if(!k(e))return s(1);const n=e.getBoundingClientRect(),{width:o,height:i,$:l}=U(e);let a=(l?r(n.width):n.width)/o,c=(l?r(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),c&&Number.isFinite(c)||(c=1),{x:a,y:c}}const q=s(0);function X(t){const e=A(t);return M()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:q}function K(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),r=Y(t);let l=s(1);e&&(o?S(o)&&(l=j(o)):l=j(t));const a=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==A(t))&&e}(r,n,o)?X(r):s(0);let c=(i.left+a.x)/l.x,f=(i.top+a.y)/l.y,u=i.width/l.x,d=i.height/l.y;if(r){const t=A(r),e=o&&S(o)?A(o):o;let n=t,i=z(n);for(;i&&o&&e!==n;){const t=j(i),e=i.getBoundingClientRect(),o=N(i),r=e.left+(i.clientLeft+parseFloat(o.paddingLeft))*t.x,l=e.top+(i.clientTop+parseFloat(o.paddingTop))*t.y;c*=t.x,f*=t.y,u*=t.x,d*=t.y,c+=r,f+=l,n=A(i),i=z(n)}}return x({width:u,height:d,x:c,y:f})}function J(t,e){const n=I(t).scrollLeft;return e?e.left+n:K(P(t)).left+n}function Q(t,e,n){void 0===n&&(n=!1);const o=t.getBoundingClientRect();return{x:o.left+e.scrollLeft-(n?0:J(t,o)),y:o.top+e.scrollTop}}function Z(t,e,n){let o;if("viewport"===e)o=function(t,e){const n=A(t),o=P(t),i=n.visualViewport;let r=o.clientWidth,l=o.clientHeight,s=0,a=0;if(i){r=i.width,l=i.height;const t=M();(!t||t&&"fixed"===e)&&(s=i.offsetLeft,a=i.offsetTop)}return{width:r,height:l,x:s,y:a}}(t,n);else if("document"===e)o=function(t){const e=P(t),n=I(t),o=t.ownerDocument.body,r=i(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),l=i(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+J(t);const a=-n.scrollTop;return"rtl"===N(o).direction&&(s+=i(e.clientWidth,o.clientWidth)-r),{width:r,height:l,x:s,y:a}}(P(t));else if(S(e))o=function(t,e){const n=K(t,!0,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft,r=k(t)?j(t):s(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:i*r.x,y:o*r.y}}(e,n);else{const n=X(t);o={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return x(o)}function tt(t,e){const n=V(t);return!(n===e||!S(n)||W(n))&&("fixed"===N(n).position||tt(n,e))}function et(t,e,n){const o=k(e),i=P(e),r="fixed"===n,l=K(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const c=s(0);if(o||!o&&!r)if(("body"!==E(e)||H(i))&&(a=I(e)),o){const t=K(e,!0,r,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else i&&(c.x=J(i));const f=!i||o||r?s(0):Q(i,a);return{x:l.left+a.scrollLeft-c.x-f.x,y:l.top+a.scrollTop-c.y-f.y,width:l.width,height:l.height}}function nt(t){return"static"===N(t).position}function ot(t,e){if(!k(t)||"fixed"===N(t).position)return null;if(e)return e(t);let n=t.offsetParent;return P(t)===n&&(n=n.ownerDocument.body),n}function it(t,e){const n=A(t);if(B(t))return n;if(!k(t)){let e=V(t);for(;e&&!W(e);){if(S(e)&&!nt(e))return e;e=V(e)}return n}let o=ot(t,e);for(;o&&C(o)&&nt(o);)o=ot(o,e);return o&&W(o)&&nt(o)&&!_(o)?n:o||function(t){let e=V(t);for(;k(e)&&!W(e);){if(_(e))return e;if(B(e))return null;e=V(e)}return null}(t)||n}const rt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:o,strategy:i}=t;const r="fixed"===i,l=P(o),a=!!e&&B(e.floating);if(o===l||a&&r)return n;let c={scrollLeft:0,scrollTop:0},f=s(1);const u=s(0),d=k(o);if((d||!d&&!r)&&(("body"!==E(o)||H(l))&&(c=I(o)),k(o))){const t=K(o);f=j(o),u.x=t.x+o.clientLeft,u.y=t.y+o.clientTop}const h=!l||d||r?s(0):Q(l,c,!0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+u.x+h.x,y:n.y*f.y-c.scrollTop*f.y+u.y+h.y}},getDocumentElement:P,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:l}=t;const s=[..."clippingAncestors"===n?B(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let o=$(t,[],!1).filter((t=>S(t)&&"body"!==E(t))),i=null;const r="fixed"===N(t).position;let l=r?V(t):t;for(;S(l)&&!W(l);){const e=N(l),n=_(l);n||"fixed"!==e.position||(i=null),(r?!n&&!i:!n&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||H(l)&&!n&&tt(t,l))?o=o.filter((t=>t!==l)):i=e,l=V(l)}return e.set(t,o),o}(e,this._c):[].concat(n),r],a=s[0],c=s.reduce(((t,n)=>{const r=Z(e,n,l);return t.top=i(r.top,t.top),t.right=o(r.right,t.right),t.bottom=o(r.bottom,t.bottom),t.left=i(r.left,t.left),t}),Z(e,a,l));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:it,getElementRects:async function(t){const e=this.getOffsetParent||it,n=this.getDimensions,o=await n(t.floating);return{reference:et(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=U(t);return{width:e,height:n}},getScale:j,isElement:S,isRTL:function(t){return"rtl"===N(t).direction}};function lt(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function st(t,e,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:f="function"==typeof IntersectionObserver,animationFrame:u=!1}=r,d=Y(t),h=s||a?[...d?$(d):[],...$(e)]:[];h.forEach((t=>{s&&t.addEventListener("scroll",n,{passive:!0}),a&&t.addEventListener("resize",n)}));const p=d&&f?function(t,e){let n,r=null;const s=P(t);function a(){var t;clearTimeout(n),null==(t=r)||t.disconnect(),r=null}return function c(f,u){void 0===f&&(f=!1),void 0===u&&(u=1),a();const d=t.getBoundingClientRect(),{left:h,top:p,width:m,height:g}=d;if(f||e(),!m||!g)return;const y={rootMargin:-l(p)+"px "+-l(s.clientWidth-(h+m))+"px "+-l(s.clientHeight-(p+g))+"px "+-l(h)+"px",threshold:i(0,o(1,u))||1};let w=!0;function b(e){const o=e[0].intersectionRatio;if(o!==u){if(!w)return c();o?c(!1,o):n=setTimeout((()=>{c(!1,1e-7)}),1e3)}1!==o||lt(d,t.getBoundingClientRect())||c(),w=!1}try{r=new IntersectionObserver(b,{...y,root:s.ownerDocument})}catch(t){r=new IntersectionObserver(b,y)}r.observe(t)}(!0),a}(d,n):null;let m,g=-1,y=null;c&&(y=new ResizeObserver((t=>{let[o]=t;o&&o.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame((()=>{var t;null==(t=y)||t.observe(e)}))),n()})),d&&!u&&y.observe(d),y.observe(e));let w=u?K(t):null;return u&&function e(){const o=K(t);w&&!lt(w,o)&&n();w=o,m=requestAnimationFrame(e)}(),n(),()=>{var t;h.forEach((t=>{s&&t.removeEventListener("scroll",n),a&&t.removeEventListener("resize",n)})),null==p||p(),null==(t=y)||t.disconnect(),y=null,u&&cancelAnimationFrame(m)}}const at=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:i,y:r,placement:l,middlewareData:s}=e,a=await async function(t,e){const{placement:n,platform:o,elements:i}=t,r=await(null==o.isRTL?void 0:o.isRTL(i.floating)),l=d(n),s=h(n),a="y"===m(n),c=["left","top"].includes(l)?-1:1,f=r&&a?-1:1,p=u(e,t);let{mainAxis:g,crossAxis:y,alignmentAxis:w}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return s&&"number"==typeof w&&(y="end"===s?-1*w:w),a?{x:y*f,y:g*c}:{x:g*c,y:y*f}}(e,t);return l===(null==(n=s.offset)?void 0:n.placement)&&null!=(o=s.arrow)&&o.alignmentOffset?{}:{x:i+a.x,y:r+a.y,data:{...a,placement:l}}}}},ct=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:i,middlewareData:r,rects:l,initialPlacement:s,platform:a,elements:c}=e,{mainAxis:f=!0,crossAxis:b=!0,fallbackPlacements:x,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:O=!0,...L}=u(t,e);if(null!=(n=r.arrow)&&n.alignmentOffset)return{};const E=d(i),A=m(s),P=d(s)===s,D=await(null==a.isRTL?void 0:a.isRTL(c.floating)),S=x||(P||!O?[w(s)]:function(t){const e=w(t);return[y(t),e,y(e)]}(s)),k="none"!==R;!x&&k&&S.push(...function(t,e,n,o){const i=h(t);let r=function(t,e,n){const o=["left","right"],i=["right","left"],r=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:o:e?o:i;case"left":case"right":return e?r:l;default:return[]}}(d(t),"start"===n,o);return i&&(r=r.map((t=>t+"-"+i)),e&&(r=r.concat(r.map(y)))),r}(s,O,R,D));const F=[s,...S],H=await T(e,L),C=[];let B=(null==(o=r.flip)?void 0:o.overflows)||[];if(f&&C.push(H[E]),b){const t=function(t,e,n){void 0===n&&(n=!1);const o=h(t),i=g(t),r=p(i);let l="x"===i?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return e.reference[r]>e.floating[r]&&(l=w(l)),[l,w(l)]}(i,l,D);C.push(H[t[0]],H[t[1]])}if(B=[...B,{placement:i,overflows:C}],!C.every((t=>t<=0))){var _,M;const t=((null==(_=r.flip)?void 0:_.index)||0)+1,e=F[t];if(e)return{data:{index:t,overflows:B},reset:{placement:e}};let n=null==(M=B.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:M.placement;if(!n)switch(v){case"bestFit":{var W;const t=null==(W=B.filter((t=>{if(k){const e=m(t.placement);return e===A||"y"===e}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:W[0];t&&(n=t);break}case"initialPlacement":n=s}if(i!==n)return{reset:{placement:n}}}return{}}}},ft=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:l,elements:s}=e,{apply:a=()=>{},...c}=u(t,e),f=await T(e,c),p=d(n),g=h(n),y="y"===m(n),{width:w,height:b}=r.floating;let x,v;"top"===p||"bottom"===p?(x=p,v=g===(await(null==l.isRTL?void 0:l.isRTL(s.floating))?"start":"end")?"left":"right"):(v=p,x="end"===g?"top":"bottom");const R=b-f.top-f.bottom,O=w-f.left-f.right,L=o(b-f[x],R),E=o(w-f[v],O),A=!e.middlewareData.shift;let P=L,D=E;if(y?D=g||A?o(E,O):O:P=g||A?o(L,R):R,A&&!g){const t=i(f.left,0),e=i(f.right,0),n=i(f.top,0),o=i(f.bottom,0);y?D=w-2*(0!==t||0!==e?t+e:i(f.left,f.right)):P=b-2*(0!==n||0!==o?n+o:i(f.top,f.bottom))}await a({...e,availableWidth:D,availableHeight:P});const S=await l.getDimensions(s.floating);return w!==S.width||b!==S.height?{reset:{rects:!0}}:{}}}},ut=function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:o="referenceHidden",...i}=u(t,e);switch(o){case"referenceHidden":{const t=R(await T(e,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:O(t)}}}case"escaped":{const t=R(await T(e,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:t,escaped:O(t)}}}default:return{}}}}},dt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:l,platform:s,elements:a,middlewareData:c}=e,{element:d,padding:m=0}=u(t,e)||{};if(null==d)return{};const y=b(m),w={x:n,y:i},x=g(r),v=p(x),T=await s.getDimensions(d),R="y"===x,O=R?"top":"left",L=R?"bottom":"right",E=R?"clientHeight":"clientWidth",A=l.reference[v]+l.reference[x]-w[x]-l.floating[v],P=w[x]-l.reference[x],D=await(null==s.getOffsetParent?void 0:s.getOffsetParent(d));let S=D?D[E]:0;S&&await(null==s.isElement?void 0:s.isElement(D))||(S=a.floating[E]||l.floating[v]);const k=A/2-P/2,F=S/2-T[v]/2-1,H=o(y[O],F),C=o(y[L],F),B=H,_=S-T[v]-C,M=S/2-T[v]/2+k,W=f(B,M,_),N=!c.arrow&&null!=h(r)&&M!==W&&l.reference[v]/2-(M<B?H:C)-T[v]/2<0,I=N?M<B?M-B:M-_:0;return{[x]:w[x]+I,data:{[x]:W,centerOffset:M-W-I,...N&&{alignmentOffset:I}},reset:N}}}),ht=(t,e,n)=>{const o=new Map,i={platform:rt,...n},r={...i.platform,_c:o};return(async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:l}=n,s=r.filter(Boolean),a=await(null==l.isRTL?void 0:l.isRTL(e));let c=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:u}=v(c,o,a),d=o,h={},p=0;for(let n=0;n<s.length;n++){const{name:r,fn:m}=s[n],{x:g,y:y,data:w,reset:b}=await m({x:f,y:u,initialPlacement:o,placement:d,strategy:i,middlewareData:h,rects:c,platform:l,elements:{reference:t,floating:e}});f=null!=g?g:f,u=null!=y?y:u,h={...h,[r]:{...h[r],...w}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(c=!0===b.rects?await l.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:f,y:u}=v(c,d,a))),n=-1)}return{x:f,y:u,placement:d,strategy:i,middlewareData:h}})(t,e,{...i,platform:r})};class pt{constructor(t){this.updatePlacement=()=>{this.computePlacement()},this.host=t,t.addController(this)}async setPlacement(t=this.options){this.options=t;const{trigger:e,target:n}=t;this.cleanup=st(e,n,this.updatePlacement)}async computePlacement(){var t,e,n;const{arrowElement:o,alignment:i,caret:r,trigger:l,target:s,styleElement:a,matchWidth:c,open:f,alignmentAxisOffset:u,autoAlignBoundary:d,isTabTip:h}=this.options,p=null!=a?a:s;if(!p)return;let m;switch(i){case"top-left":m="top-start";break;case"top-right":m="top-end";break;case"bottom-left":m="bottom-start";break;case"bottom-right":m="bottom-end";break;case"left-bottom":m="left-end";break;case"left-top":m="left-start";break;case"right-bottom":m="right-end";break;case"right-top":m="right-start";break;default:m=i}const g=getComputedStyle(p),y=h?0:null!==(t=(t=>{const e=parseFloat(t);return t.trim().endsWith("rem")?16*e:e})(g.getPropertyValue("--cds-popover-offset").trim()))&&void 0!==t?t:10,w=[at(r&&!h?{alignmentAxis:u,mainAxis:y}:0),ct({fallbackPlacements:h?m.includes("bottom")?["bottom-start","bottom-end","top-start","top-end"]:["top-start","top-end","bottom-start","bottom-end"]:m.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start",boundary:d}),...!c||"bottom"!==m&&"top"!==m?[ft({apply({elements:t}){t.floating.style.removeProperty("width")}})]:[ft({apply({rects:t,elements:e}){e.floating.style.width=`${t.reference.width}px`}})],...r&&o?[dt({element:o,padding:15})]:[],ut()];if(f){const{x:t,y:i,placement:r,middlewareData:s,strategy:a}=await ht(l,p,{strategy:"fixed",middleware:w,placement:m});if(p.setAttribute("align",r),p.style.left=`${t}px`,p.style.top=`${i}px`,p.style.position=`${a}`,p.style.visibility=(null===(e=s.hide)||void 0===e?void 0:e.referenceHidden)?"hidden":"visible",o){const{x:t,y:e}=s.arrow,n={top:"bottom",right:"left",bottom:"top",left:"right"}[r.split("-")[0]];o.style.left=null!=t?`${t}px`:"",o.style.top=null!=e?`${e}px`:"",o.style.right="",o.style.bottom="",o.style[n]=-o.offsetWidth/2+"px"}"CDS-AI-LABEL"!==this.host.tagName&&"CDS-SLUG"!==this.host.tagName||null===(n=this.host)||void 0===n||n.setAttribute("alignment",r)}}hostUpdated(){var t;this.host.hasAttribute("open")||(null===(t=this.cleanup)||void 0===t||t.call(this),this.cleanup=void 0)}hostDisconnected(){var t;null===(t=this.cleanup)||void 0===t||t.call(this),this.cleanup=void 0}}export{pt as F,t as P,e as a};
