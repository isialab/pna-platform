{"version":3,"file":"file-uploader-item.js","sources":["../../../src/components/file-uploader/file-uploader-item.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport { iconLoader } from '../../globals/internal/icon-loader';\nimport WarningFilled16 from '@carbon/icons/es/warning--filled/16.js';\nimport Close16 from '@carbon/icons/es/close/16.js';\nimport CheckmarkFilled16 from '@carbon/icons/es/checkmark--filled/16.js';\nimport { LOADING_TYPE } from '../loading/loading';\nimport { FILE_UPLOADER_ITEM_SIZE, FILE_UPLOADER_ITEM_STATE } from './defs';\nimport styles from './file-uploader.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\nexport { FILE_UPLOADER_ITEM_SIZE, FILE_UPLOADER_ITEM_STATE };\n\n/**\n * File uploader item.\n *\n * @element cds-file-uploader-item\n * @slot validity-message The validity message.\n * @slot validity-message-supplement The supplemental validity message.\n * @fires cds-file-uploader-item-beingdeleted\n *   The custom event fired before this file uploader item is being deleted upon a user gesture.\n *   Cancellation of this event stops the user-initiated action of deleting this file uploader item.\n * @fires cds-file-uploader-item-deleted - The custom event fired after this file uploader item is deleted upon a user gesture.\n */\n@customElement(`${prefix}-file-uploader-item`)\nclass CDSFileUploaderItem extends LitElement {\n  /**\n   * Handles `click` event on the delete button.\n   */\n  private _handleClickDeleteButton() {\n    const init = {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n    };\n    const { eventBeforeDelete, eventDelete } = this\n      .constructor as typeof CDSFileUploaderItem;\n    if (this.dispatchEvent(new CustomEvent(eventBeforeDelete, init))) {\n      this.dispatchEvent(new CustomEvent(eventDelete, init));\n    }\n  }\n\n  /**\n   * @returns The content showing the editing UI of this file uploader item.\n   */\n  private _renderEditing() {\n    const {\n      iconDescription,\n      invalid,\n      _handleClickDeleteButton: handleClickDeleteButton,\n    } = this;\n    return html`\n      ${!invalid\n        ? undefined\n        : iconLoader(WarningFilled16, { class: `${prefix}--file-invalid` })}\n      <button\n        type=\"button\"\n        aria-label=\"${iconDescription}\"\n        class=\"${prefix}--file-close\"\n        @click=\"${handleClickDeleteButton}\">\n        ${iconLoader(Close16)}\n      </button>\n    `;\n  }\n\n  /**\n   * @returns The content showing this file uploader's file uploading status as in progress.\n   */\n  private _renderUploading() {\n    const { iconDescription } = this;\n    return html`\n      <cds-loading\n        assistive-text=\"${iconDescription}\"\n        type=\"${LOADING_TYPE.SMALL}\"></cds-loading>\n    `;\n  }\n\n  /**\n   * @returns The content showing this file uploader's file uploading status as complete.\n   */\n  private _renderUploaded() {\n    const { iconDescription } = this;\n    return iconLoader(CheckmarkFilled16, {\n      class: `${prefix}--file-complete`,\n      'aria-label': iconDescription,\n    });\n  }\n\n  /**\n   * @returns The content showing this file uploader's status.\n   */\n  private _renderStatus() {\n    const { state } = this;\n    switch (state) {\n      case FILE_UPLOADER_ITEM_STATE.EDIT:\n        return this._renderEditing();\n      case FILE_UPLOADER_ITEM_STATE.UPLOADING:\n        return this._renderUploading();\n      case FILE_UPLOADER_ITEM_STATE.COMPLETE:\n        return this._renderUploaded();\n      default:\n        return undefined;\n    }\n  }\n\n  /**\n   * The `aria-label` attribute for the icon to delete this file uploader item.\n   */\n  @property({ attribute: 'icon-description' })\n  iconDescription = 'Delete this file';\n\n  /**\n   * Controls the invalid state and visibility of the `validityMessage`.\n   */\n  @property({ type: Boolean, reflect: true })\n  invalid = false;\n\n  /**\n   * The size of this file uploader item.\n   */\n  @property({ reflect: true })\n  size = FILE_UPLOADER_ITEM_SIZE.MEDIUM;\n\n  /**\n   * The state of this file uploader item.\n   */\n  @property({ reflect: true })\n  state = FILE_UPLOADER_ITEM_STATE.UPLOADING;\n\n  /**\n   * The error subject text.\n   */\n  @property({ attribute: 'error-subject' })\n  errorSubject = '';\n\n  /**\n   * The error body text\n   */\n  @property({ attribute: 'error-body' })\n  errorBody = '';\n\n  render() {\n    const { invalid, errorSubject, errorBody } = this;\n    return html` <p class=\"${prefix}--file-filename\"><slot></slot></p>\n      <span class=\"${prefix}--file__state-container\"\n        >${this._renderStatus()}</span\n      >\n      <div\n        class=\"${prefix}--form-requirement\"\n        ?hidden=\"${!invalid && !errorSubject}\">\n        <div class=\"${prefix}--form-requirement__title\">${errorSubject}</div>\n        <p\n          class=\"${prefix}--form-requirement__supplement\"\n          ?hidden=\"${!errorBody}\">\n          ${errorBody}\n        </p>\n      </div>`;\n  }\n\n  /**\n   * The name of the custom event fired before this file uplodaer item is being deleted upon a user gesture.\n   * Cancellation of this event stops the user-initiated action of deleting this file uploader item.\n   */\n  static get eventBeforeDelete() {\n    return `${prefix}-file-uploader-item-beingdeleted`;\n  }\n\n  /**\n   * The name of the custom event fired after this file uplodaer item is deleted upon a user gesture.\n   */\n  static get eventDelete() {\n    return `${prefix}-file-uploader-item-deleted`;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSFileUploaderItem;\n"],"names":["customElement"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAKG;AAgBH;;;;;;;;;;AAUG;AAEH,IAAM,mBAAmB,GAAzB,MAAM,mBAAoB,SAAQ,UAAU,CAAA;AAA5C,IAAA,WAAA,GAAA;;AAgFE;;AAEG;QAEH,IAAe,CAAA,eAAA,GAAG,kBAAkB;AAEpC;;AAEG;QAEH,IAAO,CAAA,OAAA,GAAG,KAAK;AAEf;;AAEG;AAEH,QAAA,IAAA,CAAA,IAAI,GAAG,uBAAuB,CAAC,MAAM;AAErC;;AAEG;AAEH,QAAA,IAAA,CAAA,KAAK,GAAG,wBAAwB,CAAC,SAAS;AAE1C;;AAEG;QAEH,IAAY,CAAA,YAAA,GAAG,EAAE;AAEjB;;AAEG;QAEH,IAAS,CAAA,SAAA,GAAG,EAAE;;AAjHd;;AAEG;IACK,wBAAwB,GAAA;AAC9B,QAAA,MAAM,IAAI,GAAG;AACX,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,UAAU,EAAE,IAAI;AAChB,YAAA,QAAQ,EAAE,IAAI;SACf;AACD,QAAA,MAAM,EAAE,iBAAiB,EAAE,WAAW,EAAE,GAAG;AACxC,aAAA,WAAyC;AAC5C,QAAA,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC,EAAE;YAChE,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;;;AAI1D;;AAEG;IACK,cAAc,GAAA;QACpB,MAAM,EACJ,eAAe,EACf,OAAO,EACP,wBAAwB,EAAE,uBAAuB,GAClD,GAAG,IAAI;AACR,QAAA,OAAO,IAAI,CAAA;AACP,MAAA,EAAA,CAAC;AACD,cAAE;AACF,cAAE,UAAU,CAAC,eAAe,EAAE,EAAE,KAAK,EAAE,CAAG,EAAA,MAAM,CAAgB,cAAA,CAAA,EAAE,CAAC;;;sBAGrD,eAAe,CAAA;iBACpB,MAAM,CAAA;kBACL,uBAAuB,CAAA;UAC/B,UAAU,CAAC,OAAO,CAAC;;KAExB;;AAGH;;AAEG;IACK,gBAAgB,GAAA;AACtB,QAAA,MAAM,EAAE,eAAe,EAAE,GAAG,IAAI;AAChC,QAAA,OAAO,IAAI,CAAA;;0BAEW,eAAe,CAAA;AACzB,cAAA,EAAA,YAAY,CAAC,KAAK,CAAA;KAC7B;;AAGH;;AAEG;IACK,eAAe,GAAA;AACrB,QAAA,MAAM,EAAE,eAAe,EAAE,GAAG,IAAI;QAChC,OAAO,UAAU,CAAC,iBAAiB,EAAE;YACnC,KAAK,EAAE,CAAG,EAAA,MAAM,CAAiB,eAAA,CAAA;AACjC,YAAA,YAAY,EAAE,eAAe;AAC9B,SAAA,CAAC;;AAGJ;;AAEG;IACK,aAAa,GAAA;AACnB,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI;QACtB,QAAQ,KAAK;YACX,KAAK,wBAAwB,CAAC,IAAI;AAChC,gBAAA,OAAO,IAAI,CAAC,cAAc,EAAE;YAC9B,KAAK,wBAAwB,CAAC,SAAS;AACrC,gBAAA,OAAO,IAAI,CAAC,gBAAgB,EAAE;YAChC,KAAK,wBAAwB,CAAC,QAAQ;AACpC,gBAAA,OAAO,IAAI,CAAC,eAAe,EAAE;AAC/B,YAAA;AACE,gBAAA,OAAO,SAAS;;;IAwCtB,MAAM,GAAA;QACJ,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,SAAS,EAAE,GAAG,IAAI;QACjD,OAAO,IAAI,CAAA,CAAA,WAAA,EAAc,MAAM,CAAA;qBACd,MAAM,CAAA;WAChB,IAAI,CAAC,aAAa,EAAE,CAAA;;;iBAGd,MAAM,CAAA;mBACJ,CAAC,OAAO,IAAI,CAAC,YAAY,CAAA;AACtB,oBAAA,EAAA,MAAM,8BAA8B,YAAY,CAAA;;mBAEnD,MAAM,CAAA;AACJ,mBAAA,EAAA,CAAC,SAAS,CAAA;YACnB,SAAS;;aAER;;AAGX;;;AAGG;AACH,IAAA,WAAW,iBAAiB,GAAA;QAC1B,OAAO,CAAA,EAAG,MAAM,CAAA,gCAAA,CAAkC;;AAGpD;;AAEG;AACH,IAAA,WAAW,WAAW,GAAA;QACpB,OAAO,CAAA,EAAG,MAAM,CAAA,2BAAA,CAA6B;;;AAGxC,mBAAM,CAAA,MAAA,GAAG,MAAH;AAjEb,UAAA,CAAA;AADC,IAAA,QAAQ,CAAC,EAAE,SAAS,EAAE,kBAAkB,EAAE;AACN,CAAA,EAAA,mBAAA,CAAA,SAAA,EAAA,iBAAA,EAAA,MAAA,CAAA;AAMrC,UAAA,CAAA;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;AAC1B,CAAA,EAAA,mBAAA,CAAA,SAAA,EAAA,SAAA,EAAA,MAAA,CAAA;AAMhB,UAAA,CAAA;AADC,IAAA,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE;AACW,CAAA,EAAA,mBAAA,CAAA,SAAA,EAAA,MAAA,EAAA,MAAA,CAAA;AAMtC,UAAA,CAAA;AADC,IAAA,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE;AACgB,CAAA,EAAA,mBAAA,CAAA,SAAA,EAAA,OAAA,EAAA,MAAA,CAAA;AAM3C,UAAA,CAAA;AADC,IAAA,QAAQ,CAAC,EAAE,SAAS,EAAE,eAAe,EAAE;AACtB,CAAA,EAAA,mBAAA,CAAA,SAAA,EAAA,cAAA,EAAA,MAAA,CAAA;AAMlB,UAAA,CAAA;AADC,IAAA,QAAQ,CAAC,EAAE,SAAS,EAAE,YAAY,EAAE;AACtB,CAAA,EAAA,mBAAA,CAAA,SAAA,EAAA,WAAA,EAAA,MAAA,CAAA;AAlHX,mBAAmB,GAAA,UAAA,CAAA;AADxB,IAAAA,aAAa,CAAC,CAAA,EAAG,MAAM,CAAA,mBAAA,CAAqB;AACvC,CAAA,EAAA,mBAAmB,CAsJxB;AAED,4BAAe,mBAAmB;;;;"}