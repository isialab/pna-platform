{"version":3,"file":"selectable-tag.js","sources":["../../../src/components/tag/selectable-tag.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { html, LitElement } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport FocusMixin from '../../globals/mixins/focus';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport { TAG_SIZE, TAG_TYPE } from './defs';\nimport './tag';\nimport '../tooltip/index';\nimport styles from './tag.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\nexport { TAG_SIZE, TAG_TYPE };\n\n/**\n * Selectable tag.\n *\n * @element cds-selectable-tag\n *\n * @fires cds-selectable-tag-beforeselected - The custom event fired as the element is being selected\n * @fires cds-selectable-tag-selected - The custom event fired after the element has been selected\n */\n@customElement(`${prefix}-selectable-tag`)\nclass CDSSelectableTag extends HostListenerMixin(FocusMixin(LitElement)) {\n  /**\n   * Custom events to be triggered\n   * @param event Event object\n   */\n  protected triggerEvents = (event) => {\n    if (this.disabled) {\n      event.stopPropagation();\n    } else {\n      const init = {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: {\n          triggeredBy: event.target,\n        },\n      };\n      if (\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSSelectableTag).eventBeforeSelected,\n            init\n          )\n        )\n      ) {\n        this.selected = !this.selected;\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSSelectableTag).eventSelected,\n            init\n          )\n        );\n      }\n    }\n  };\n\n  /**\n   * Handles `click` event on this element.\n   *\n   * @param event The event.\n   */\n  @HostListener('shadowRoot:click')\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- https://github.com/carbon-design-system/carbon/issues/20452\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleClick = (event: MouseEvent) => {\n    this.triggerEvents(event);\n  };\n\n  @HostListener('shadowRoot:keydown')\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- https://github.com/carbon-design-system/carbon/issues/20452\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      this.triggerEvents(event);\n    }\n  };\n\n  /**\n   * `true` if the tag should be disabled\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * Specify the state of the selectable tag.\n   */\n  @property({ type: Boolean, reflect: true })\n  selected = false;\n\n  /**\n   * The size of the tag.\n   */\n  @property({ type: String, reflect: true })\n  size = TAG_SIZE.MEDIUM;\n\n  /**\n   * Provide text to be rendered inside of a the tag.\n   */\n  @property({ type: String, reflect: true })\n  text = '';\n\n  /**\n   * true if the tag text has ellipsis applied\n   */\n  @state()\n  protected _hasEllipsisApplied = false;\n\n  async updated() {\n    await this.updateComplete;\n\n    const textContainer = this.shadowRoot\n      ?.querySelector(`${prefix}-tag`)\n      ?.shadowRoot?.querySelector(`.${prefix}--tag__label`);\n    if (!textContainer) return;\n\n    const hasEllipsis = textContainer.scrollWidth > textContainer.clientWidth;\n\n    this._hasEllipsisApplied = hasEllipsis;\n  }\n\n  render() {\n    const {\n      disabled,\n      selected,\n      size,\n      text,\n      _hasEllipsisApplied: hasEllipsisApplied,\n    } = this;\n\n    return html` ${hasEllipsisApplied\n      ? html` <cds-tooltip align=\"bottom\" keyboard-only leave-delay-ms=${0}>\n          <cds-tag\n            ?aria-pressed=\"${selected}\"\n            size=\"${size}\"\n            ?disabled=\"${disabled}\">\n            <slot name=\"icon\" slot=\"icon\"></slot>\n            ${text}\n            <slot name=\"decorator\" slot=\"decorator\"></slot>\n            <slot name=\"ai-label\" slot=\"ai-label\"></slot>\n            <slot name=\"slug\" slot=\"slug\"></slot>\n          </cds-tag>\n          <cds-tooltip-content id=\"content\"> ${text} </cds-tooltip-content>\n        </cds-tooltip>`\n      : html`\n          <cds-tag\n            ?aria-pressed=\"${selected}\"\n            size=\"${size}\"\n            ?disabled=\"${disabled}\">\n            <slot name=\"icon\" slot=\"icon\"></slot>\n            ${text}\n            <slot name=\"decorator\" slot=\"decorator\"></slot>\n            <slot name=\"ai-label\" slot=\"ai-label\"></slot>\n            <slot name=\"slug\" slot=\"slug\"></slot>\n          </cds-tag>\n        `}`;\n  }\n\n  /**\n   * The name of the custom event before this tag is selected.\n   */\n  static get eventBeforeSelected() {\n    return `${prefix}-selectable-tag-beingselected`;\n  }\n\n  /**\n   * The name of the custom event fired after this tag is selected.\n   */\n  static get eventSelected() {\n    return `${prefix}-selectable-tag-selected`;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSSelectableTag;\n"],"names":["customElement"],"mappings":"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"}