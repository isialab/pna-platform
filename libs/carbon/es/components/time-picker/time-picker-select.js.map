{"version":3,"file":"time-picker-select.js","sources":["../../../src/components/time-picker/time-picker-select.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { html, LitElement } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { prefix } from '../../globals/settings';\nimport { iconLoader } from '../../globals/internal/icon-loader';\nimport ChevronDown16 from '@carbon/icons/es/chevron--down/16.js';\nimport { filter } from '../../globals/internal/collection-helpers';\nimport styles from './time-picker.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport { TIME_PICKER_SIZE } from './defs';\nimport FormMixin from '../../globals/mixins/form';\n\n/**\n * Time picker select dropdown.\n *\n * @element cds-time-picker-select\n */\n@customElement(`${prefix}-time-picker-select`)\nclass CDSTimePickerSelect extends FormMixin(LitElement) {\n  /**\n   * The mutation observer for DOM mutation.\n   */\n  private _observerMutation: MutationObserver | null = null;\n\n  /**\n   * The select element.\n   */\n  @query('select')\n  private _selectNode!: HTMLSelectElement;\n\n  /**\n   * The ARIA label for the UI control.\n   */\n  @property({ attribute: 'aria-label' })\n  ariaLabel = 'open list of options';\n\n  /**\n   * Optionally provide the default value of the select\n   */\n  @property({ attribute: 'default-value' })\n  defaultValue = '';\n\n  /**\n   * Controls the readOnly state of the select\n   */\n  @property({ type: Boolean, reflect: true })\n  readOnly = false;\n\n  /**\n   * Specify whether the control is disabled\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * Specify a custom id for the select box\n   */\n  @property({ reflect: true })\n  id = '';\n\n  /**\n   * Name for the select in the `FormData`\n   */\n  @property()\n  name = '';\n\n  /**\n   * The value of the select.\n   */\n  @property({ reflect: true })\n  value = '';\n\n  /**\n   * Size of the time picker select\n   */\n  @property({ reflect: true })\n  size = TIME_PICKER_SIZE.MEDIUM;\n\n  /**\n   * Handles `oninput` event on the `<select>`.\n   *\n   * @param event The event.\n   * @param event.target The event target.\n   */\n  private _handleInput(event: Event) {\n    const { value } = event.target as HTMLSelectElement;\n    this.value = value;\n    const { eventSelect } = this.constructor as typeof CDSTimePickerSelect;\n    this.dispatchEvent(\n      new CustomEvent(eventSelect, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          value,\n        },\n      })\n    );\n  }\n\n  /**\n   * Handles DOM mutation of select items\n   */\n  private _handleMutation = () => {\n    this.requestUpdate();\n  };\n\n  /**\n   * @returns The template containing child `<option>` elements from select items.\n   */\n  private _renderItems() {\n    const selectorItem = `${prefix}-select-item`;\n\n    return filter(\n      this.childNodes,\n      (item) =>\n        item.nodeType === Node.ELEMENT_NODE &&\n        (item as Element).matches(selectorItem)\n    ).map((item) => {\n      const disabled = item.hasAttribute('disabled');\n      const label = item.getAttribute('label');\n      const selected = item.hasAttribute('selected');\n      const value = item.getAttribute('value');\n      const { textContent } = item;\n\n      return html`\n        <option\n          ?disabled=\"${disabled}\"\n          label=\"${ifDefined(label)}\"\n          ?selected=\"${selected}\"\n          value=\"${ifDefined(value)}\">\n          ${textContent}\n        </option>\n      `;\n    });\n  }\n\n  _handleFormdata(event: Event) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- https://github.com/carbon-design-system/carbon/issues/20452\n    const { formData } = event as any; // TODO: Wait for `FormDataEvent` being available in `lib.dom.d.ts`\n    const { disabled, name, value } = this;\n    if (!disabled) {\n      formData.append(name, value);\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._observerMutation = new MutationObserver(this._handleMutation);\n    this._observerMutation.observe(this, {\n      attributes: true,\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  disconnectedCallback() {\n    if (this._observerMutation) {\n      this._observerMutation.disconnect();\n      this._observerMutation = null;\n    }\n    super.disconnectedCallback();\n  }\n\n  updated(changedProperties) {\n    if (\n      changedProperties.has('defaultValue') &&\n      this.defaultValue &&\n      !this.value\n    ) {\n      this.value = this.defaultValue;\n    }\n\n    if (changedProperties.has('value')) {\n      if (this._selectNode) {\n        this._selectNode.value = this.value;\n      }\n    }\n  }\n\n  render() {\n    const {\n      ariaLabel,\n      disabled,\n      size,\n      id,\n      value,\n      readOnly,\n      _handleInput: handleInput,\n    } = this;\n\n    const inputClasses = classMap({\n      [`${prefix}--select-input`]: true,\n      [`${prefix}--select-input--${size}`]: size,\n    });\n\n    return html`\n      <select\n        id=\"${ifDefined(id)}\"\n        class=\"${inputClasses}\"\n        aria-readonly=\"${String(Boolean(readOnly))}\"\n        ?disabled=\"${disabled}\"\n        aria-label=\"${ifDefined(ariaLabel)}\"\n        .value=\"${ifDefined(value)}\"\n        @input=\"${handleInput}\">\n        ${this._renderItems()}\n      </select>\n      ${iconLoader(ChevronDown16, {\n        class: `${prefix}--select__arrow`,\n        'aria-hidden': 'true',\n      })}\n    `;\n  }\n  static get eventSelect() {\n    return `${prefix}-select-selected`;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  static styles = styles;\n}\n\nexport default CDSTimePickerSelect;\n"],"names":["customElement"],"mappings":"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"}