{"version":3,"file":"progress-step.js","sources":["../../../src/components/progress-indicator/progress-step.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport CheckmarkOutline16 from '@carbon/icons/es/checkmark--outline/16.js';\nimport CircleDash16 from '@carbon/icons/es/circle-dash/16.js';\nimport Warning16 from '@carbon/icons/es/warning/16.js';\nimport Incomplete16 from '@carbon/icons/es/incomplete/16.js';\nimport FocusMixin from '../../globals/mixins/focus';\nimport { PROGRESS_STEP_STAT } from './defs';\nimport styles from './progress-indicator.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport { iconLoader } from '../../globals/internal/icon-loader';\n\nexport { PROGRESS_STEP_STAT };\n\n/**\n * Icons, keyed by state.\n */\nconst icons = {\n  [PROGRESS_STEP_STAT.COMPLETE]: CheckmarkOutline16,\n  [PROGRESS_STEP_STAT.INCOMPLETE]: CircleDash16,\n  [PROGRESS_STEP_STAT.INVALID]: Warning16,\n  [PROGRESS_STEP_STAT.CURRENT]: Incomplete16,\n};\n\n/**\n * Progress step.\n *\n * @element cds-progress-step\n * @slot secondary-label-text - The secondary progress label.\n */\n@customElement(`${prefix}-progress-step`)\nexport default class CDSProgressStep extends FocusMixin(LitElement) {\n  /**\n   * Internal flags: true if the user explicitly passed these attributes.\n   */\n  private _explicitComplete = false;\n  private _explicitCurrent = false;\n  private _explicitState: string | null = null;\n\n  get hasExplicitState() {\n    return (\n      this._explicitComplete ||\n      this._explicitCurrent ||\n      this._explicitState !== null\n    );\n  }\n\n  /**\n   * `true` if the progress step should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * The a11y text for the icon.\n   */\n  @property({ attribute: 'icon-label' })\n  iconLabel!: string;\n\n  @property({ reflect: true })\n  description!: string;\n\n  @property()\n  label!: string;\n\n  /**\n   * The secondary progress label.\n   * @deprecated Use `secondaryLabel` instead\n   */\n  @property({ attribute: 'secondary-label-text' })\n  secondaryLabelText!: string;\n\n  @property({ attribute: 'secondary-label' })\n  secondaryLabel!: string;\n\n  /**\n   * `true` if the progress step should grow equally to fill space.\n   *\n   * @private\n   */\n  @property({ type: Boolean, reflect: true })\n  spaceEqually = false;\n\n  /**\n   * The progress state.\n   * @deprecated Use `currentIndex` instead\n   */\n  @property({ reflect: true })\n  state = PROGRESS_STEP_STAT.INCOMPLETE;\n\n  /**\n   * `true` if the progress step should be vertical.\n   *\n   * @private\n   */\n  @property({ type: Boolean, reflect: true })\n  vertical = false;\n\n  /**\n   * Set by the parent indicator. If true, the step is interactive unless it is\n   * current or disabled. This mirrors React's \"onChange prop exists\" semantics.\n   */\n  @property({ type: Boolean })\n  clickable = false;\n\n  /**\n   * Specify whether the step has been completed\n   */\n  @property({ type: Boolean, reflect: true })\n  complete = false;\n\n  /**\n   * Specify whether the step is the current step\n   */\n  @property({ type: Boolean, reflect: true })\n  current = false;\n\n  /**\n   * Specify whether the step is invalid\n   */\n  @property({ type: Boolean, reflect: true })\n  invalid = false;\n\n  connectedCallback() {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'listitem');\n    }\n    // Capture which attributes were explicitly set by the user\n    this._explicitComplete = this.hasAttribute('complete');\n    this._explicitCurrent = this.hasAttribute('current');\n    this._explicitState = this.getAttribute('state');\n\n    super.connectedCallback();\n  }\n\n  updated(changedProperties) {\n    if (changedProperties.has('disabled')) {\n      this.setAttribute('aria-disabled', String(Boolean(this.disabled)));\n    }\n  }\n\n  // Fire internal click only when interactive\n  private _fireStepClick = () => {\n    const isUnclickable =\n      this.current ||\n      this.state === PROGRESS_STEP_STAT.CURRENT ||\n      this.disabled ||\n      !this.clickable;\n    if (isUnclickable) return;\n\n    this.dispatchEvent(\n      new CustomEvent(`${prefix}-progress-step-click`, {\n        bubbles: true,\n        composed: true,\n        detail: {},\n      })\n    );\n  };\n\n  private _onKeyDown = (ev: KeyboardEvent) => {\n    if (ev.key === 'Enter' || ev.key === ' ') {\n      ev.preventDefault();\n      this._fireStepClick();\n    }\n  };\n\n  private _svgIcon(invalid: boolean, current: boolean, complete: boolean) {\n    if (invalid) return PROGRESS_STEP_STAT.INVALID;\n    if (current) return PROGRESS_STEP_STAT.CURRENT;\n    if (complete) return PROGRESS_STEP_STAT.COMPLETE;\n    return false;\n  }\n\n  render() {\n    const {\n      description,\n      iconLabel,\n      label,\n      secondaryLabelText,\n      secondaryLabel,\n      state,\n      complete,\n      current,\n      invalid,\n    } = this;\n    const svgLabel = iconLabel || description;\n    const optionalLabel = secondaryLabel || secondaryLabelText;\n\n    // Unclickable if current OR disabled OR no onChange upstream (to match React)\n    const isUnclickable =\n      current ||\n      state === PROGRESS_STEP_STAT.CURRENT ||\n      this.disabled ||\n      !this.clickable;\n\n    return html`\n      <div\n        class=\"${prefix}--progress-step-button ${isUnclickable\n          ? `${prefix}--progress-step-button--unclickable`\n          : ''}\"\n        tabindex=\"${isUnclickable ? -1 : 0}\"\n        @click=${this._fireStepClick}\n        @keydown=${this._onKeyDown}\n        role=\"button\"\n        aria-disabled=\"${String(isUnclickable)}\"\n        title=\"${label}\">\n        ${iconLoader(\n          icons[this._svgIcon(invalid, current, complete) || state],\n          {\n            class:\n              invalid || state === PROGRESS_STEP_STAT.INVALID\n                ? `${prefix}--progress__warning`\n                : '',\n            title: svgLabel,\n          }\n        )}\n        <slot name=\"label-text\">\n          <p\n            class=\"${prefix}--progress-label\"\n            aria-describedby=\"label-tooltip\"\n            title=\"${label}\">\n            ${label}\n          </p>\n        </slot>\n        <slot name=\"secondary-label-text\">\n          ${!optionalLabel\n            ? undefined\n            : html`<p class=\"${prefix}--progress-optional\">\n                ${optionalLabel}\n              </p>`}\n        </slot>\n        <span class=\"${prefix}--progress-line\"></span>\n      </div>\n    `;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n  static styles = styles;\n}\n"],"names":["customElement"],"mappings":"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"}