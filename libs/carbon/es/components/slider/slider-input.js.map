{"version":3,"file":"slider-input.js","sources":["../../../src/components/slider/slider-input.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { prefix } from '../../globals/settings';\nimport { iconLoader } from '../../globals/internal/icon-loader';\nimport FocusMixin from '../../globals/mixins/focus';\nimport WarningFilled16 from '@carbon/icons/es/warning--filled/16.js';\nimport WarningAltFilled16 from '@carbon/icons/es/warning--alt--filled/16.js';\nimport styles from './slider.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * The `<input>` box for slider.\n *\n * @element cds-slider-input\n * @fires cds-slider-input-changed - The custom event fired after the value is changed by user gesture.\n */\n@customElement(`${prefix}-slider-input`)\nclass CDSSliderInput extends FocusMixin(LitElement) {\n  /**\n   * The internal value of `max` property.\n   */\n  private _max = '100';\n\n  /**\n   * The internal value of `min` property.\n   */\n  private _min = '0';\n\n  /**\n   * The internal value of `step` property.\n   */\n  private _step = '1';\n\n  /**\n   * Handles `change` event to fire a normalized custom event.\n   */\n  private _handleChange({ target }: Event) {\n    const min = Number(this.min);\n    const max = Number(this.max);\n    const intermediate = this.value;\n    const newValue = (target as HTMLInputElement).value;\n    const newValueNumber = Number(newValue);\n    if (newValueNumber >= min && newValueNumber <= max && newValue !== '') {\n      this.value = newValueNumber;\n      this.dispatchEvent(\n        new CustomEvent(\n          (this.constructor as typeof CDSSliderInput).eventChange,\n          {\n            bubbles: true,\n            composed: true,\n            detail: {\n              value: this.value,\n              intermediate,\n            },\n          }\n        )\n      );\n    } else {\n      this.invalid = newValue === '';\n      this.warn =\n        (newValueNumber < min || newValueNumber > max) && newValue !== '';\n      const intermediate = this.value;\n      if (newValue !== '') {\n        this.value = newValueNumber < min ? min : max;\n      } else {\n        this.value = '';\n      }\n      this.dispatchEvent(\n        new CustomEvent(\n          (this.constructor as typeof CDSSliderInput).eventChange,\n          {\n            bubbles: true,\n            composed: true,\n            detail: {\n              value: this.value,\n              intermediate,\n            },\n          }\n        )\n      );\n    }\n  }\n\n  /**\n   * Handles `input` event to fire a normalized custom event.\n   */\n  private _handleInput({ target }: Event) {\n    const newValue = (target as HTMLInputElement).value;\n    if (newValue) {\n      this.value = Number(newValue);\n      this.invalid = false;\n      if (this.value >= Number(this.min) && this.value <= Number(this.max)) {\n        this.warn = false;\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSSliderInput).eventChange,\n            {\n              bubbles: true,\n              composed: true,\n              detail: {\n                value: this.value,\n                intermediate: true,\n              },\n            }\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   * `true` if the input should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * true to specify if the control is invalid.\n   */\n  @property({ type: Boolean, reflect: true })\n  invalid = false;\n\n  /**\n   * true to specify if the control should display warn icon and text.\n   */\n  @property({ type: Boolean, reflect: true })\n  warn = false;\n\n  /**\n   * true to specify if the control should display warn icon and text.\n   */\n  @property({ type: Boolean })\n  hideTextInput = false;\n\n  /**\n   * The maximum value.\n   */\n  @property({ type: Number, reflect: true })\n  get max() {\n    return this._max.toString();\n  }\n\n  set max(value) {\n    const { max: oldMax } = this;\n    this._max = value;\n    this.requestUpdate('max', oldMax);\n  }\n\n  /**\n   * The minimum value.\n   */\n  @property({ type: Number, reflect: true })\n  get min() {\n    return this._min.toString();\n  }\n\n  set min(value) {\n    const { min: oldMin } = this;\n    this._min = value;\n    this.requestUpdate('min', oldMin);\n  }\n\n  /**\n   * The snapping step of the value.\n   */\n  @property({ type: Number, reflect: true })\n  get step() {\n    return this._step.toString();\n  }\n\n  set step(value) {\n    const { step: oldStep } = this;\n    this._step = value;\n    this.requestUpdate('step', oldStep);\n  }\n\n  /**\n   * The type of the `<input>`.\n   */\n  @property()\n  type = 'number';\n\n  /**\n   * The value.\n   */\n  @property({ type: Number })\n  value;\n\n  /**\n   * true` if the input should be readonly.\n   */\n  @property({ type: Boolean, reflect: true })\n  readonly = false;\n\n  render() {\n    const {\n      disabled,\n      hideTextInput,\n      max,\n      min,\n      readonly,\n      step,\n      type,\n      value,\n      invalid,\n      warn,\n      _handleChange: handleChange,\n      _handleInput: handleInput,\n    } = this;\n\n    const isInteractive = !readonly && !disabled;\n\n    const normalizedProps: {\n      invalid: boolean;\n      warn: boolean;\n    } = {\n      invalid: isInteractive && invalid,\n      warn: isInteractive && !invalid && warn,\n    };\n\n    const classes = classMap({\n      [`${prefix}--text-input`]: true,\n      [`${prefix}--slider-text-input`]: true,\n      [`${prefix}--text-input--invalid`]: normalizedProps.invalid,\n      [`${prefix}--slider-text-input--warn`]: normalizedProps.warn,\n    });\n\n    const invalidIcon = iconLoader(WarningFilled16, {\n      class: `${prefix}--slider__invalid-icon`,\n    });\n\n    const warnIcon = iconLoader(WarningAltFilled16, {\n      class: `${prefix}--slider__invalid-icon ${prefix}--slider__invalid-icon--warning`,\n    });\n    return html`\n      ${!hideTextInput\n        ? html`\n            <input\n              ?disabled=\"${disabled}\"\n              ?data-invalid=\"${normalizedProps.invalid}\"\n              type=\"${ifDefined(type)}\"\n              class=\"${classes}\"\n              max=\"${max}\"\n              min=\"${min}\"\n              ?readonly=\"${ifDefined(readonly)}\"\n              step=\"${step}\"\n              .value=\"${value}\"\n              @change=\"${handleChange}\"\n              @input=\"${handleInput}\" />\n            ${normalizedProps.invalid ? html`${invalidIcon}` : null}\n            ${normalizedProps.warn ? html`${warnIcon}` : null}\n          `\n        : null}\n    `;\n  }\n\n  /**\n   * A selector that will return the parent slider.\n   */\n  static get selectorParent() {\n    return `${prefix}-slider`;\n  }\n\n  /**\n   * The name of the custom event fired after the value is changed by user gesture.\n   */\n  static get eventChange() {\n    return `${prefix}-slider-input-changed`;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n  static styles = styles;\n}\n\nexport default CDSSliderInput;\n"],"names":["customElement"],"mappings":"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"}