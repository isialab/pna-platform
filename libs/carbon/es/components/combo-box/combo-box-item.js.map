{"version":3,"file":"combo-box-item.js","sources":["../../../src/components/combo-box/combo-box-item.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport type { PropertyValues } from 'lit';\nimport { prefix } from '../../globals/settings';\nimport CDSDropdownItem from '../dropdown/dropdown-item';\nimport styles from './combo-box.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\ntype NextSiblingAttribute =\n  | 'hovered-next-sibling'\n  | 'highlighted-next-sibling'\n  | 'selected-next-sibling';\n\n/**\n * Combo box item.\n *\n * @element cds-combo-box-item\n */\n@customElement(`${prefix}-combo-box-item`)\nclass CDSComboBoxItem extends CDSDropdownItem {\n  private _nextSiblingRefs: Record<NextSiblingAttribute, Element | null> = {\n    'hovered-next-sibling': null,\n    'highlighted-next-sibling': null,\n    'selected-next-sibling': null,\n  };\n\n  private _handleMouseEnter = () => {\n    if (this.hasAttribute('disabled')) {\n      return;\n    }\n    this._syncNextSibling('hovered-next-sibling', true);\n  };\n\n  private _handleMouseLeave = () => {\n    this._syncNextSibling('hovered-next-sibling', false);\n  };\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.classList.add(`${prefix}--list-box__menu-item`);\n    this.addEventListener('mouseenter', this._handleMouseEnter);\n    this.addEventListener('mouseleave', this._handleMouseLeave);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('mouseenter', this._handleMouseEnter);\n    this.removeEventListener('mouseleave', this._handleMouseLeave);\n    this._syncNextSibling('hovered-next-sibling', false);\n    this._syncNextSibling('highlighted-next-sibling', false);\n    this._syncNextSibling('selected-next-sibling', false);\n    super.disconnectedCallback();\n  }\n\n  private _getNextItem(): Element | null {\n    let next = this.nextElementSibling;\n    while (next) {\n      if (\n        next instanceof HTMLElement &&\n        next.tagName.toLowerCase() === `${prefix}-combo-box-item`\n      ) {\n        return next;\n      }\n      next = next.nextElementSibling;\n    }\n    return null;\n  }\n\n  private _syncNextSibling(\n    attribute: NextSiblingAttribute,\n    shouldSet: boolean\n  ) {\n    const currentSibling = this._nextSiblingRefs[attribute];\n    currentSibling?.removeAttribute(attribute);\n    if (shouldSet) {\n      const next = this._getNextItem();\n      if (next) {\n        next.setAttribute(attribute, '');\n        this._nextSiblingRefs[attribute] = next;\n        return;\n      }\n    }\n    this._nextSiblingRefs[attribute] = null;\n  }\n\n  protected updated(changedProperties: PropertyValues) {\n    super.updated(changedProperties);\n    if (changedProperties.has('highlighted')) {\n      this._syncNextSibling('highlighted-next-sibling', this.highlighted);\n    }\n    if (changedProperties.has('selected')) {\n      this._syncNextSibling('selected-next-sibling', this.selected);\n    }\n  }\n\n  static styles = styles;\n}\n\nexport default CDSComboBoxItem;\n"],"names":["customElement"],"mappings":"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"}