{"version":3,"file":"icon-loader-utils.js","sources":["../../../src/globals/internal/icon-loader-utils.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { getAttributes, formatAttributes } from '@carbon/icon-helpers';\nimport { unsafeSVG } from 'lit/directives/unsafe-svg.js';\n\n// Carbon icon element types\nexport interface CarbonIconElement {\n  elem: string;\n  attrs: Record<string, string | number>;\n  content: (CarbonIconElement | string)[];\n}\n\n// Carbon icon descriptor types\nexport interface CarbonIconDescriptor {\n  elem: string;\n  attrs: Record<string, string | number>;\n  content: CarbonIconElement[];\n  name: string;\n  size: number;\n}\n\n// Carbon icon module types\nexport interface CarbonIconModule {\n  default?: CarbonIconDescriptor;\n}\n\nexport type CarbonIcon = CarbonIconDescriptor | CarbonIconModule;\n\n// Helper function to get the actual descriptor\nfunction getIconDescriptor(descriptor: CarbonIcon): CarbonIconDescriptor {\n  return 'default' in descriptor && descriptor.default\n    ? (descriptor.default as CarbonIconDescriptor)\n    : (descriptor as CarbonIconDescriptor);\n}\n\n/**\n * Convert an imported icon descriptor to an SVG string, e.g.\n * import ChevronRight16 from '@carbon/icons/es/chevron--right/16.js';\n */\nexport function carbonIconToSVG(\n  descriptor: CarbonIcon,\n  attributes: Record<string, string | number | undefined> = {}\n) {\n  const iconDescriptor = getIconDescriptor(descriptor);\n\n  // Ensure attrs exists\n  if (!iconDescriptor.attrs) {\n    iconDescriptor.attrs = {};\n  }\n\n  // Merge attributes\n  const mergedAttrs = {\n    ...iconDescriptor.attrs,\n    ...attributes,\n  };\n\n  // Process attributes\n  const processedAttrs = getAttributes(mergedAttrs);\n\n  // Ensure proper attribute formatting\n  const attrString = formatAttributes(processedAttrs);\n\n  // Process content\n  const content = iconDescriptor.content || [];\n  const contentString = content\n    .map((child: CarbonIconElement | string) => {\n      if (typeof child === 'string') return child;\n      return elementToSVG(child);\n    })\n    .join('');\n\n  return `<svg ${attrString}>${contentString}</svg>`;\n}\n\n/**\n * Convert an element to SVG string\n */\nfunction elementToSVG(element: CarbonIconElement | string): string {\n  if (typeof element === 'string') {\n    return element;\n  }\n\n  const { elem = 'svg', attrs = {}, content = [] } = element;\n  const children = content.map(elementToSVG).join('');\n  const attrString = formatAttributes(attrs);\n\n  return `<${elem} ${attrString}>${children}</${elem}>`;\n}\n\n/**\n * Create an icon function that returns a Lit template with unsafeSVG\n */\nexport function createIconTemplate(descriptor: CarbonIcon) {\n  return (attributes: Record<string, string | number | undefined> = {}) => {\n    const svgString = carbonIconToSVG(descriptor, attributes);\n    return unsafeSVG(svgString);\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;AAKG;AA4BH;AACA,SAAS,iBAAiB,CAAC,UAAsB,EAAA;AAC/C,IAAA,OAAO,SAAS,IAAI,UAAU,IAAI,UAAU,CAAC;UACxC,UAAU,CAAC;UACX,UAAmC;AAC1C;AAEA;;;AAGG;SACa,eAAe,CAC7B,UAAsB,EACtB,aAA0D,EAAE,EAAA;AAE5D,IAAA,MAAM,cAAc,GAAG,iBAAiB,CAAC,UAAU,CAAC;;AAGpD,IAAA,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE;AACzB,QAAA,cAAc,CAAC,KAAK,GAAG,EAAE;;;IAI3B,MAAM,WAAW,mCACZ,cAAc,CAAC,KAAK,CACpB,EAAA,UAAU,CACd;;AAGD,IAAA,MAAM,cAAc,GAAG,aAAa,CAAC,WAAW,CAAC;;AAGjD,IAAA,MAAM,UAAU,GAAG,gBAAgB,CAAC,cAAc,CAAC;;AAGnD,IAAA,MAAM,OAAO,GAAG,cAAc,CAAC,OAAO,IAAI,EAAE;IAC5C,MAAM,aAAa,GAAG;AACnB,SAAA,GAAG,CAAC,CAAC,KAAiC,KAAI;QACzC,IAAI,OAAO,KAAK,KAAK,QAAQ;AAAE,YAAA,OAAO,KAAK;AAC3C,QAAA,OAAO,YAAY,CAAC,KAAK,CAAC;AAC5B,KAAC;SACA,IAAI,CAAC,EAAE,CAAC;AAEX,IAAA,OAAO,CAAQ,KAAA,EAAA,UAAU,CAAI,CAAA,EAAA,aAAa,QAAQ;AACpD;AAEA;;AAEG;AACH,SAAS,YAAY,CAAC,OAAmC,EAAA;AACvD,IAAA,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;AAC/B,QAAA,OAAO,OAAO;;AAGhB,IAAA,MAAM,EAAE,IAAI,GAAG,KAAK,EAAE,KAAK,GAAG,EAAE,EAAE,OAAO,GAAG,EAAE,EAAE,GAAG,OAAO;AAC1D,IAAA,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;AACnD,IAAA,MAAM,UAAU,GAAG,gBAAgB,CAAC,KAAK,CAAC;IAE1C,OAAO,CAAA,CAAA,EAAI,IAAI,CAAI,CAAA,EAAA,UAAU,IAAI,QAAQ,CAAA,EAAA,EAAK,IAAI,CAAA,CAAA,CAAG;AACvD;AAEA;;AAEG;AACG,SAAU,kBAAkB,CAAC,UAAsB,EAAA;AACvD,IAAA,OAAO,CAAC,UAAA,GAA0D,EAAE,KAAI;QACtE,MAAM,SAAS,GAAG,eAAe,CAAC,UAAU,EAAE,UAAU,CAAC;AACzD,QAAA,OAAO,SAAS,CAAC,SAAS,CAAC;AAC7B,KAAC;AACH;;;;"}