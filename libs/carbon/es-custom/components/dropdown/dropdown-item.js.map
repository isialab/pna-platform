{"version":3,"file":"dropdown-item.js","sources":["../../../src/components/dropdown/dropdown-item.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport { iconLoader } from '../../globals/internal/icon-loader';\nimport Checkmark16 from '@carbon/icons/es/checkmark/16.js';\nimport { DROPDOWN_SIZE } from './dropdown';\nimport styles from './dropdown.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * Dropdown item.\n *\n * @element cds-custom-dropdown-item\n * @csspart selected-icon The selected icon.\n */\n@customElement(`${prefix}-dropdown-item`)\nclass CDSDropdownItem extends LitElement {\n  /**\n   * `true` if this dropdown item should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * `true` if this dropdown item should be highlighted.\n   * If `true`, parent `<dropdown>` selects/deselects this dropdown item upon keyboard interaction.\n   *\n   * @private\n   */\n  @property({ type: Boolean, reflect: true })\n  highlighted = false;\n\n  /**\n   * `true` if this dropdown item should be selected.\n   *\n   * @private\n   */\n  @property({ type: Boolean, reflect: true })\n  selected = false;\n\n  /**\n   * Dropdown size.\n   */\n  @property({ reflect: true })\n  size = DROPDOWN_SIZE.MEDIUM;\n\n  /**\n   * The `value` attribute that is set to the parent `<cds-custom-dropdown>` when this dropdown item is selected.\n   */\n  @property()\n  value = '';\n\n  /**\n   * true if menu item has ellipsis applied\n   */\n  @state()\n  _hasEllipsisApplied = false;\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'option');\n    }\n    if (!this.hasAttribute('id')) {\n      this.setAttribute(\n        'id',\n        `${prefix}-dropdown-item-${(this.constructor as typeof CDSDropdownItem)\n          .id++}`\n      );\n    }\n    this.setAttribute('aria-selected', String(this.selected));\n  }\n\n  /**\n   * Handles `slotchange` event.\n   *\n   * Adds the `title` property to its parent element so the native\n   * browser tooltip appears for menu items that result in ellipsis\n   */\n  protected _handleSlotChange({ target }: Event) {\n    const text = (target as HTMLSlotElement).assignedNodes().filter(\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- https://github.com/carbon-design-system/carbon/issues/20452\n      (node) => node.nodeType !== Node.TEXT_NODE || node!.textContent!.trim()\n    );\n\n    const textContainer = this.shadowRoot?.querySelector(\n      `.${prefix}--list-box__menu-item__option`\n    );\n\n    if (!textContainer || this._hasEllipsisApplied === true) return;\n\n    const observer = new ResizeObserver(() => {\n      this._hasEllipsisApplied =\n        textContainer.scrollWidth > textContainer.clientWidth;\n\n      if (this._hasEllipsisApplied) {\n        textContainer.setAttribute('title', text[0].textContent ?? '');\n      }\n    });\n\n    observer.observe(textContainer);\n  }\n\n  render() {\n    const { selected, _handleSlotChange: handleSlotChange } = this;\n    return html`\n      <div class=\"${prefix}--list-box__menu-item__option\" part=\"menu-item\">\n        <slot @slotchange=${handleSlotChange}></slot>\n        ${!selected\n          ? undefined\n          : iconLoader(Checkmark16, {\n              part: 'selected-icon',\n              class: `${prefix}--list-box__menu-item__selected-icon`,\n            })}\n      </div>\n    `;\n  }\n\n  /**\n   * Store an identifier for use in composing this item's id.\n   *\n   * Auto-increments anytime a new dropdown-item appears.\n   */\n  static id = 0;\n\n  static styles = styles;\n}\n\nexport default CDSDropdownItem;\n"],"names":["customElement"],"mappings":"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"}