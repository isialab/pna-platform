{"version":3,"file":"accordion.js","sources":["../../../src/components/accordion/accordion.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport { forEach } from '../../globals/internal/collection-helpers';\nimport { ACCORDION_SIZE, ACCORDION_ALIGNMENT } from './defs';\nimport styles from './accordion.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\nexport { ACCORDION_SIZE, ACCORDION_ALIGNMENT };\n\n/**\n * Accordion container.\n *\n * @element cds-custom-accordion\n */\n@customElement(`${prefix}-accordion`)\nclass CDSAccordion extends LitElement {\n  /**\n   * Accordion size should be sm, md, lg.\n   */\n  @property({ reflect: true })\n  size = ACCORDION_SIZE.MEDIUM;\n\n  /**\n   * Specify the alignment of the accordion heading title and chevron\n   */\n  @property({ reflect: true })\n  alignment = ACCORDION_ALIGNMENT.END;\n\n  /**\n   * Specify whether Accordion text should be flush, default is false, does not work with align=\"start\"\n   */\n  @property({ type: Boolean, reflect: true })\n  isFlush = false;\n\n  /**\n   * Disable all accordion items inside this accordion.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  connectedCallback() {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'list');\n    }\n    super.connectedCallback();\n  }\n\n  updated(changedProperties) {\n    if (changedProperties.has('size')) {\n      // Propagate `size` attribute to descendants until `:host-context()` gets supported in all major browsers\n      forEach(\n        this.querySelectorAll(\n          (this.constructor as typeof CDSAccordion).selectorAccordionItems\n        ),\n        (elem) => {\n          elem.setAttribute('size', this.size);\n        }\n      );\n    }\n    if (changedProperties.has('alignment')) {\n      // Propagate `alignment` attribute to descendants until `:host-context()` gets supported in all major browsers\n      forEach(\n        this.querySelectorAll(\n          (this.constructor as typeof CDSAccordion).selectorAccordionItems\n        ),\n        (elem) => {\n          elem.setAttribute('alignment', this.alignment);\n        }\n      );\n    }\n    if (\n      changedProperties.has('isFlush') ||\n      changedProperties.has('alignment')\n    ) {\n      // Propagate `isFlush` attribute to descendants until `:host-context()` gets supported in all major browsers\n      forEach(\n        this.querySelectorAll(\n          (this.constructor as typeof CDSAccordion).selectorAccordionItems\n        ),\n        (elem) => {\n          // eslint-disable-next-line  @typescript-eslint/no-unused-expressions -- https://github.com/carbon-design-system/carbon/issues/20452\n          this.isFlush && this.alignment !== 'start'\n            ? elem.setAttribute('isFlush', '')\n            : elem.removeAttribute('isFlush');\n        }\n      );\n    }\n\n    if (changedProperties.has('disabled')) {\n      forEach(\n        this.querySelectorAll(\n          (this.constructor as typeof CDSAccordion).selectorAccordionItems\n        ),\n        (elem) => {\n          if (this.disabled) {\n            elem.setAttribute('disabled', '');\n          } else {\n            elem.removeAttribute('disabled');\n          }\n        }\n      );\n    }\n\n    // Marks the last accordion item for styling (simulates :last-child in Shadow DOM)\n    const items = Array.from(\n      this.querySelectorAll(\n        (this.constructor as typeof CDSAccordion).selectorAccordionItems\n      )\n    );\n    items.forEach((item) => item.removeAttribute('data-last-item'));\n\n    const lastVisible = items\n      .reverse()\n      .find((item) => !(item as HTMLElement).hidden);\n    lastVisible?.setAttribute('data-last-item', '');\n  }\n\n  render() {\n    return html` <slot></slot> `;\n  }\n\n  static get selectorAccordionItems() {\n    return `${prefix}-accordion-item`;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSAccordion;\n"],"names":["customElement"],"mappings":"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"}