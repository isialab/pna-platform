{"version":3,"file":"table-batch-actions.js","sources":["../../../src/components/data-table/table-batch-actions.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html, nothing } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport styles from './data-table.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * Table batch actions.\n *\n * @element cds-custom-table-batch-actions\n * @fires cds-custom-table-batch-actions-cancel-clicked - The custom event fired after the Cancel button is clicked.\n * @fires cds-custom-table-batch-actions-select-all-clicked - The custom event fired after the Select all button is clicked.\n */\n\n@customElement(`${prefix}-table-batch-actions`)\nclass CDSTableBatchActions extends LitElement {\n  /**\n   * Handles `click` event on the Cancel button.\n   */\n  private _handleCancel() {\n    const { eventClickCancel } = this\n      .constructor as typeof CDSTableBatchActions;\n    this.dispatchEvent(\n      new CustomEvent(eventClickCancel, { bubbles: true, composed: true })\n    );\n  }\n\n  /**\n   * Handles `click` event on the Select all button.\n   */\n  private _handleSelectAll() {\n    this.dispatchEvent(\n      new CustomEvent(CDSTableBatchActions.eventClickSelectAll, {\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  /**\n   * `true` if this batch actions bar should be active.\n   */\n  @property({ type: Boolean, reflect: true })\n  active = false;\n\n  /**\n   * The formatter for selected items. Should be changed upon the locale the UI is rendered with.\n   */\n  @property({ attribute: false })\n  formatSelectedItemsCount = ({ count }) =>\n    `${count} item${count <= 1 ? '' : 's'} selected`;\n\n  /**\n   * Numeric representation of the total number of items selected in a table.\n   * This number is used to derive the selection message.\n   */\n  @property({ type: Number, attribute: 'selected-rows-count' })\n  selectedRowsCount = 0;\n\n  /**\n   * Numeric representation of the total number of items in a table.\n   * This number is used in the select all button text\n   * This property controls the rendering of the Select all button\n   */\n  @property({ type: Number, attribute: 'total-rows-count' })\n  totalRowsCount = 0;\n\n  /**\n   * The table size.\n   */\n  @property({ reflect: true })\n  size = 'lg';\n\n  firstUpdated() {\n    this._updateButtons();\n    this._setupHoverListeners();\n  }\n\n  private _setupHoverListeners() {\n    const slot = this.shadowRoot?.querySelector('slot');\n    const cancelButton = this.shadowRoot?.querySelector(\n      `${prefix}-button.${prefix}--batch-summary__cancel`\n    ) as HTMLElement;\n\n    if (slot && cancelButton) {\n      const setupListeners = () => {\n        const buttons = slot.assignedElements();\n        const lastButton = buttons[buttons.length - 1] as HTMLElement;\n\n        if (lastButton) {\n          const handleEnter = () => {\n            cancelButton.style.setProperty('--divider-opacity', '0');\n          };\n\n          const handleLeave = () => {\n            cancelButton.style.setProperty('--divider-opacity', '1');\n          };\n\n          lastButton.removeEventListener('mouseenter', handleEnter);\n          lastButton.removeEventListener('mouseleave', handleLeave);\n\n          lastButton.addEventListener('mouseenter', handleEnter);\n          lastButton.addEventListener('mouseleave', handleLeave);\n        }\n      };\n\n      setupListeners();\n      slot.addEventListener('slotchange', setupListeners);\n    }\n  }\n\n  updated(changedProperties) {\n    if (changedProperties.has('active')) {\n      this.setAttribute('tabindex', `${this.active ? '' : '-1'}`);\n    }\n\n    if (changedProperties.has('size')) {\n      this._updateButtons();\n    }\n  }\n\n  private _updateButtons() {\n    this.querySelectorAll(\n      (this.constructor as typeof CDSTableBatchActions).selectorButtons\n    ).forEach((button) => {\n      button.setAttribute('batch-action', '');\n      const buttonSize = this.size === 'xs' || this.size === 'sm' ? 'sm' : 'lg';\n      button.setAttribute('size', buttonSize);\n    });\n  }\n\n  render() {\n    const {\n      formatSelectedItemsCount,\n      selectedRowsCount,\n      totalRowsCount,\n      _handleCancel: handleCancel,\n      _handleSelectAll: handleSelectAll,\n      size,\n    } = this;\n\n    const buttonSize = size === 'xs' || size === 'sm' ? 'sm' : 'lg';\n\n    return html`\n      <div class=\"${prefix}--batch-summary\">\n        <p class=\"${prefix}--batch-summary__para\">\n          ${formatSelectedItemsCount({ count: selectedRowsCount })}\n        </p>\n        ${totalRowsCount > 0\n          ? html`\n              <span class=\"${prefix}--batch-summary__divider\">|</span>\n              <button\n                class=\"${prefix}--btn ${prefix}--btn--primary ${prefix}--batch-summary__select-all\"\n                @click=${handleSelectAll}>\n                <slot name=\"select-all-button-content\"\n                  >Select all (${totalRowsCount})</slot\n                >\n              </button>\n            `\n          : nothing}\n      </div>\n\n      <div class=\"${prefix}--action-list\">\n        <slot></slot>\n        <cds-custom-button\n          kind=\"primary\"\n          size=\"${buttonSize}\"\n          class=\"${prefix}--batch-summary__cancel\"\n          batch-action\n          @click=${handleCancel}>\n          <slot name=\"cancel-button-content\">Cancel</slot>\n        </cds-custom-button>\n      </div>\n    `;\n  }\n\n  /**\n   * The CSS selector to find the action buttons.\n   */\n  static get selectorButtons() {\n    return `${prefix}-button`;\n  }\n\n  /**\n   * The name of the custom event fired after the Cancel button is clicked.\n   */\n  static get eventClickCancel() {\n    return `${prefix}-table-batch-actions-cancel-clicked`;\n  }\n\n  /**\n   * The name of the custom event fired after the Select all button is clicked.\n   */\n  static get eventClickSelectAll() {\n    return `${prefix}-table-batch-actions-select-all-clicked`;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSTableBatchActions;\n"],"names":["customElement"],"mappings":"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"}